{% extends "root/base.html" %} {% load crispy_forms_tags %} 
{% load custom_filters %} {% block content %} 

{% for post in files %}
<article class="media content-section">
  <img
    class="rounded-circle article-img"
    src="{{ post.author.profile.image.url}}"
  />
  <div class="media-body">
    <div class="article-metadata">
      <small class="text-muted">{{post.created_at}}</small>
    </div>
    <h1>
      <a class="article-title" href="#">{{post.title}}</a>
    </h1>
    <a class="article-content">{{ post.file.name|basename}}</a>

    <form action="{% url 'delete_file' post.pk %}" method="POST">
      {% csrf_token %}
      {% if request.user == post.owner %}
      <button type="submit" class="btn btn-danger">Delete</button>
    <button id="favorite-button">Favorite</button>
    {% endif %}
    </form>
    <a href="{% url 'download_file' post.file.path %}" class="btn btn-primary"
    >Download</a>
  </div>
</article>
{% endfor %}

{% for post in folders %}
<article class="media content-section">
  <div class="media-body">
    <h1>
      <a class="article-title" href="{% url 'subfolder' post.id %}">{{post.name}}</a>
    </h1>
    <a href="{% url 'download_folder' post.id %}" class="btn btn-primary"
    >Download</a>
    <button id="favorite-button">Favorite</button>
    {% if request.user == post.user %}
    <form action="{% url 'delete_folder' post.pk %}" method="POST">
      {% csrf_token %}
      <button type="submit" class="btn btn-danger">Delete</button>
   {%endif%}
    </form>
  </div>
</article>
{% endfor %}

{% block favourite%}
{% endblock favourite%}

{% endblock content %}
